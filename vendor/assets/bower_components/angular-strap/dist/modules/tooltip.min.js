/**
 * angular-strap
 * @version v2.1.4 - 2014-11-26
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(e,n,o,i,a,l,r,s,u,c,f){function p(e,i){function a(){K.$emit(A.prefixEvent+".show",P)}function l(){return K.$emit(A.prefixEvent+".hide",P),W&&"focus"===A.trigger?e[0].blur():void x()}function p(){var t=A.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",P.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",P.enter),e.on("hover"===t?"mouseleave":"blur",P.leave),"button"===F&&"hover"!==t&&e.on(m?"touchstart":"mousedown",P.$onFocusElementMouseDown))})}function y(){for(var t=A.trigger.split(" "),n=t.length;n--;){var o=t[n];"click"===o?e.off("click",P.toggle):"manual"!==o&&(e.off("hover"===o?"mouseenter":"focus",P.enter),e.off("hover"===o?"mouseleave":"blur",P.leave),"button"===F&&"hover"!==o&&e.off(m?"touchstart":"mousedown",P.$onFocusElementMouseDown))}}function v(){"focus"!==A.trigger?j.on("keyup",P.$onKeyUp):e.on("keyup",P.$onFocusKeyUp)}function k(){"focus"!==A.trigger?j.off("keyup",P.$onKeyUp):e.off("keyup",P.$onFocusKeyUp)}function E(){f(function(){j.on("click",C),w.on("click",P.hide),z=!0},0,!1)}function S(){z&&(j.off("click",C),w.off("click",P.hide),z=!1)}function C(t){t.stopPropagation()}function D(){return"body"===A.container?u.offset(A.target[0]||e[0]):u.position(A.target[0]||e[0])}function T(t,e,n,o){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-o/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"left":i={top:e.top+e.height/2-o/2,left:e.left-n};break;default:i={top:e.top-o,left:e.left+e.width/2-n/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-n}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-o;break;case"bottom":i.top=e.top+e.height}return i}function x(){clearTimeout(O),P.$isShown&&null!==j&&(A.autoClose&&S(),A.keyboard&&k()),N&&(N.$destroy(),N=null),j&&(j.remove(),j=P.$element=null)}var P={},F=e[0].nodeName.toLowerCase(),A=P.$options=angular.extend({},t,i);P.$promise=g(A.template);var K=P.$scope=A.scope&&A.scope.$new()||n.$new();if(A.delay&&angular.isString(A.delay)){var U=A.delay.split(",").map(parseFloat);A.delay=U.length>1?{show:U[0],hide:U[1]}:U[0]}A.title&&(K.title=s.trustAsHtml(A.title)),K.$setEnabled=function(t){K.$$postDigest(function(){P.setEnabled(t)})},K.$hide=function(){K.$$postDigest(function(){P.hide()})},K.$show=function(){K.$$postDigest(function(){P.show()})},K.$toggle=function(){K.$$postDigest(function(){P.toggle()})},P.$isShown=K.$isShown=!1;var O,H;A.contentTemplate&&(P.$promise=P.$promise.then(function(t){var e=angular.element(t);return g(A.contentTemplate).then(function(t){var n=d('[ng-bind="content"]',e[0]);return n.length||(n=d('[ng-bind="title"]',e[0])),n.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var M,j,q,L,N;P.$promise.then(function(t){angular.isObject(t)&&(t=t.data),A.html&&(t=t.replace(b,'ng-bind-html="')),t=$.apply(t),q=t,M=o(t),P.init()}),P.init=function(){A.delay&&angular.isNumber(A.delay)&&(A.delay={show:A.delay,hide:A.delay}),"self"===A.container?L=e:angular.isElement(A.container)?L=A.container:A.container&&(L=d(A.container)),p(),A.target&&(A.target=angular.isElement(A.target)?A.target:d(A.target)),A.show&&K.$$postDigest(function(){"focus"===A.trigger?e[0].focus():P.show()})},P.destroy=function(){y(),x(),K.$destroy()},P.enter=function(){return clearTimeout(O),H="in",A.delay&&A.delay.show?void(O=setTimeout(function(){"in"===H&&P.show()},A.delay.show)):P.show()},P.show=function(){if(A.bsEnabled){K.$emit(A.prefixEvent+".show.before",P);var t,n;A.container?(t=L,n=L[0].lastChild?angular.element(L[0].lastChild):null):(t=null,n=e),j&&x(),N=P.$scope.$new(),j=P.$element=M(N,function(){}),j.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(A.placement),A.animation&&j.addClass(A.animation),A.type&&j.addClass(A.prefixClass+"-"+A.type),A.customClass&&j.addClass(A.customClass);var o=r.enter(j,t,n,a);o&&o.then&&o.then(a),P.$isShown=K.$isShown=!0,h(K),c(function(){P.$applyPlacement(),j&&j.css({visibility:"visible"})}),A.keyboard&&("focus"!==A.trigger&&P.focus(),v()),A.autoClose&&E()}},P.leave=function(){return clearTimeout(O),H="out",A.delay&&A.delay.hide?void(O=setTimeout(function(){"out"===H&&P.hide()},A.delay.hide)):P.hide()};var W;P.hide=function(t){if(P.$isShown){K.$emit(A.prefixEvent+".hide.before",P),W=t;var e=r.leave(j,l);e&&e.then&&e.then(l),P.$isShown=K.$isShown=!1,h(K),A.keyboard&&null!==j&&k(),A.autoClose&&null!==j&&S()}},P.toggle=function(){P.$isShown?P.leave():P.enter()},P.focus=function(){j[0].focus()},P.setEnabled=function(t){A.bsEnabled=t},P.$applyPlacement=function(){if(j){var t=D(),e=j.prop("offsetWidth"),n=j.prop("offsetHeight"),o=T(A.placement,t,e,n);o.top+="px",o.left+="px",j.css(o)}},P.$onKeyUp=function(t){27===t.which&&P.$isShown&&(P.hide(),t.stopPropagation())},P.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},P.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),P.$isShown?e[0].blur():e[0].focus()};var z=!1;return P}function h(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function d(t,e){return angular.element((e||document).querySelectorAll(t))}function g(t){return y[t]?y[t]:y[t]=i.when(a.get(t)||l.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var $=String.prototype.trim,m="createTouch"in e.document,b=/ng-bind="/gi,w=angular.element(e.document),y={};return p}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,n,o,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var l={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(a[t])&&(l[t]=a[t])}),t.hasOwnProperty("title")||(t.title=""),a.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var o=t.title;t.title=n.trustAsHtml(e),angular.isDefined(o)&&i(function(){r&&r.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,n){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(n)&&i(function(){r&&r.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){r&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?r.show():r.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t){r&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),r.setEnabled(t===!1?!1:!0))});var r=o(e,l);t.$on("$destroy",function(){r&&r.destroy(),l=null,r=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map